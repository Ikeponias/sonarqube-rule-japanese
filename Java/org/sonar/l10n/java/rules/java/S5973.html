<p>不安定なテストとは、コードを変更することなく、あるときは合格し、あるときは不合格となるテストのことです。明らかに、エンジニアが失敗したテストを再実行しなければならないため、開発のスピードが落ちます。しかし、本当の問題は、これらのテストを完全に信頼することができないことです。彼らは多くの異なる理由で失敗するかもしれませんし、それらのどれかが本番で起こるかどうかもわかりません。</p>
<p>TestNGのようないくつかのツールは、開発者が欠陥のあるテストを自動的に再試行することを可能にします。これは一時的な解決策としてはOKかもしれませんが、絶対に修正すべきです。薄っぺらいテストを増やせば増やすほど、本番でバグが発生する可能性は高くなります。</p>
<p>このルールでは、アノテーション<code translate="no">org.testng.annotations.Test</code> に<code translate="no">100</code> よりも低い値を持つ<code translate="no">successPercentage</code> の引数を与えた場合に問題が発生する。</p>
<h2>コンプライアンス違反のコード例</h2>
<pre translate="no">
import org.testng.annotations.Test;

public class PercentageTest {
    @Test(successPercentage = 80, invocationCount = 10)  // Noncompliant. The test is allowed to fail 2 times.
    public void flakyTest() {
    }
}
</pre>
<h2>見る</h2>
<ul>
  <li><a href="https://testng.org/doc/documentation-main.html#annotations">TestNG ドキュメント - アノテーション</a></li>
  <li><a href="https://engineering.atspotify.com/2019/11/18/test-flakiness-methods-for-identifying-and-dealing-with-flaky-tests/">テストの欠陥 - 欠陥テストを特定し対処するための方法</a></li>
</ul>

